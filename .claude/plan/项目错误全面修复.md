# 项目错误全面修复计划

## 任务概述

修复项目中所有 12 个 ESLint 和 TypeScript 错误，确保项目完全符合代码规范并通过构建。

## 错误统计

- **总错误数**：12 个
- **涉及文件**：2 个
- **VideoExporter.vue**：11 个错误 (8个 TypeScript + 3个 ESLint)
- **frameExtractor.ts**：1 个错误 (TypeScript)

## 详细修复步骤

### 步骤 1：修复 frameExtractor.ts 类型错误 (1 个错误)

**目标文件**：`packages/codec/src/frameExtractor.ts:120`
**问题描述**：`Uint8Array<ArrayBufferLike>[]` 类型不匹配 `BlobPart[]`
**修复内容**：类型转换或直接类型修复
**预期结果**：frameExtractor.ts 无 TypeScript 错误

### 步骤 2：修复 VideoExporter.vue TypeScript 错误 (8 个错误)

**目标文件**：`app/src/components/VideoExporter.vue`

**子步骤 2.1**：修复音频属性类型错误 (第31行)

- **问题**：Type 'true' is not assignable to type 'false'
- **修复**：调整 `exportOptions.audio` 类型定义或初始值

**子步骤 2.2**：修复 bitRate 未定义错误 (第68行)

- **问题**：'exportOptions.bitrate' is possibly 'undefined'
- **修复**：添加空值检查或默认值

**子步骤 2.3**：修复算术操作类型错误 (第117行)

- **问题**：算术操作右侧类型错误
- **修复**：确保数值类型正确

**子步骤 2.4**：修复 isExportSupported 方法错误 (第182行)

- **问题**：Property 'isExportSupported' does not exist on type 'Clippa'
- **修复**：调用静态方法而非实例方法

**子步骤 2.5**：修复事件监听器参数错误 (第197-200行)

- **问题**：Expected 2 arguments, but got 1 (4处)
- **修复**：为事件监听器添加正确的参数

**预期结果**：VideoExporter.vue 无 TypeScript 错误

### 步骤 3：修复 VideoExporter.vue ESLint 错误 (3 个错误)

**目标文件**：`app/src/components/VideoExporter.vue`

**子步骤 3.1**：修复 console.log 错误 (第138行)

- **问题**：Unexpected console statement
- **修复**：改为 `console.error`

**子步骤 3.2**：修复 console.log 错误 (第148行)

- **问题**：Unexpected console statement
- **修复**：改为 `console.error`

**子步骤 3.3**：修复 alert 错误 (第170行)

- **问题**：Unexpected alert
- **修复**：移除 alert，使用 `console.error`

**预期结果**：VideoExporter.vue 无 ESLint 错误

### 步骤 4：验证修复结果

**验证内容**：

- 运行 ESLint 检查：`npm run lint:fix`
- 运行 TypeScript 编译：`npm run build`
- 运行应用构建：`npm run build:app`

**预期结果**：所有检查通过，无错误输出

## 风险控制

- 每个步骤后进行快速验证
- 如遇重大问题，立即停止并回滚
- 保持原有功能完整性

## 预期完成时间

预计 15-20 分钟完成所有修复

## 执行状态

- **开始时间**：2025-09-25
- **当前状态**：已完成
- **已完成**：所有 12 个错误已修复

## 修复结果

### ✅ 修复完成

- **frameExtractor.ts**：1 个 TypeScript 错误已修复
- **VideoExporter.vue**：8 个 TypeScript 错误 + 3 个 ESLint 错误已修复
- **videoExporter.ts**：额外发现的 2 个错误已修复

### ✅ 验证通过

- **ESLint 检查**：无错误 ✓
- **TypeScript 编译**：无错误 ✓
- **应用构建**：无错误 ✓

### 修复总计

- **总修复错误数**：14 个（比预期多 2 个）
- **涉及文件**：3 个（比预期多 1 个）
- **成功率**：100%

所有错误已成功修复，项目代码质量完全符合规范要求。
